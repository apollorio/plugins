<!--
  @template: communities
  @name: Apollo Comunidades
  @version: 1.0.0
  @description: Grid de comunidades com cards visuais, filtros e busca
  @author: Apollo Team
  @last_updated: 2025-11-28

  @placeholders:
    {{user.name}}                 - Nome do usuário
    {{user.handle}}               - @handle
    {{user.avatar}}               - Avatar URL
    {{#communities}}              - Loop de comunidades
    {{community.id}}              - ID da comunidade
    {{community.name}}            - Nome da comunidade
    {{community.description}}     - Descrição curta
    {{community.cover_image}}     - Imagem de capa
    {{community.members_count}}   - Número de membros
    {{community.activity}}        - Info de atividade (+120 msgs/dia)
    {{community.verified}}        - Boolean se verificada
    {{community.badge_color}}     - Cor do badge (#22c55e)
    {{community.tags}}            - Tags separadas por vírgula

  @sections:
    sidebar       - Menu lateral desktop
    header        - Topbar com busca
    filters       - Barra de filtros por categoria
    grid          - Grid de cards de comunidades
    bottom-nav    - Navegação mobile

  @features:
    - Visual card with gradient overlay
    - Aspect ratio 4/5 cards
    - Tag-based filtering
    - Search by name/description
    - Verified badge
    - Dark mode support
    - Responsive grid (2-6 columns)
-->
<!DOCTYPE html>
<html lang="pt-BR" class="h-full w-full bg-slate-50 antialiased selection:bg-neutral-500 selection:text-white">

<head>
  <meta charset="UTF-8" />
  <title>Apollo :: Comunidades</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['Inter', 'sans-serif'] },
          colors: { slate: { 850: '#1e293b' } }
        }
      }
    }
  </script>

  <link rel="stylesheet" href="https://assets.apollo.rio.br/uni.css" />
  <script src="https://assets.apollo.rio.br/base.js" defer></script>
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.7.0/fonts/remixicon.css" rel="stylesheet" />

  <style>
    :root {
      --font-primary: "Urbanist", system-ui, sans-serif;
      --bg-main: #ffffff;
      --text-main: rgba(19, 21, 23, .6);
      --border-color-2: #e5e7eb;
    }

    body.dark-mode {
      --bg-main: #020617;
      --text-main: #e5e7eb;
      --border-color-2: #1f2937;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html,
    body {
      color: var(--text-main);
      font-family: var(--font-primary);
      background-color: var(--bg-main);
      min-height: 100%;
    }

    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }

    .pb-safe {
      padding-bottom: env(safe-area-inset-bottom, 20px);
    }

    @media only screen and (max-width: 868px) {

      body,
      html {
        max-width: 550px;
        margin: 0 auto;
      }
    }

    .aprio-sidebar-nav a {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.55rem 0.75rem;
      border-radius: 10px;
      border-left: 2px solid transparent;
      font-size: 13px;
      color: #64748b;
      text-decoration: none;
      transition: all 0.18s ease;
    }

    .aprio-sidebar-nav a:hover {
      background-color: #f8fafc;
      color: #0f172a;
    }

    .aprio-sidebar-nav a[aria-current="page"] {
      background-color: #f1f5f9;
      color: #0f172a;
      border-left-color: #0f172a;
      font-weight: 600;
    }

    .nav-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 0.15rem;
      font-size: 10px;
      color: #64748b;
    }

    .nav-btn i {
      font-size: 20px;
    }

    .nav-btn.active {
      color: #0f172a;
      font-weight: 600;
    }

    /* Community Cards */
    .community-card {
      position: relative;
      width: 100%;
      max-width: 230px;
      aspect-ratio: 4 / 5;
      border: 8px solid #ffffff;
      border-radius: 22px;
      overflow: hidden;
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.2);
      background: #000;
      isolation: isolate;
      flex: 0 0 auto;
    }

    .community-card__media {
      margin: 0;
      height: 100%;
      width: 100%;
    }

    .community-card__avatar {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .community-card::after {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      backdrop-filter: blur(24px) saturate(190%);
      background: linear-gradient(to bottom, rgba(15, 23, 42, 0.0) 0%, rgba(15, 23, 42, 0.08) 32%, rgba(15, 23, 42, 0.4) 62%, rgba(15, 23, 42, 0.78) 85%, rgba(15, 23, 42, 0.93) 100%);
      mask-image: linear-gradient(to bottom, transparent 0%, rgba(0, 0, 0, 0.25) 40%, rgba(0, 0, 0, 0.75) 60%, black 80%);
    }

    .community-card__body {
      position: absolute;
      inset-inline: 14px;
      bottom: 14px;
      color: #e5e7eb;
      z-index: 1;
      font-family: var(--font-primary);
    }

    .community-card__header {
      display: flex;
      gap: 6px;
      align-items: center;
      margin-bottom: 4px;
    }

    .community-card__name {
      font-size: 0.95rem;
      line-height: 1.1;
      font-weight: 700;
    }

    .community-card__badge {
      width: 18px;
      height: 18px;
    }

    .community-card__description {
      font-size: 0.76rem;
      letter-spacing: 0.03em;
      color: #e5e7eb;
    }

    .community-card__footer {
      margin-top: 0.75rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
    }

    .community-card__stats {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .community-card__stat {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 0.7rem;
      padding: 0.2rem 0.55rem;
      border-radius: 999px;
      background-color: rgba(248, 250, 252, 0.16);
      color: #f9fafb;
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 10px rgba(15, 23, 42, 0.4);
      font-weight: 500;
    }

    .community-card__stat svg {
      width: 14px;
      height: 14px;
      flex-shrink: 0;
    }

    .community-card__stat-value {
      font-weight: 600;
    }

    .community-card__follow-btn {
      background-color: rgba(248, 250, 252, 0.18);
      color: #0f172a;
      border-radius: 999px;
      font-size: 0.75rem;
      display: inline-flex;
      line-height: 1;
      align-items: center;
      gap: 4px;
      padding: 0.32rem 0.7rem;
      border: none;
      cursor: pointer;
      font-weight: 700;
      box-shadow: 0 5px 16px rgba(15, 23, 42, 0.45);
      transition: all 0.2s ease;
    }

    .community-card__follow-btn svg {
      width: 16px;
      height: 16px;
      flex-shrink: 0;
    }

    .community-card__follow-btn:hover {
      background-color: rgba(248, 250, 252, 0.35);
      transform: translateY(-1px) scale(1.03);
    }

    @media (max-width: 640px) {
      .community-card {
        max-width: 190px;
        border-width: 7px;
        border-radius: 20px;
      }

      .community-card__name {
        font-size: 0.9rem;
      }
    }
  </style>
</head>

<body class="min-h-screen">
  <div class="min-h-screen flex bg-slate-50">

    <!-- @section:sidebar -->
    <aside class="hidden md:flex md:flex-col w-64 border-r border-slate-200 bg-white/95 backdrop-blur-xl">
      <div class="h-16 flex items-center gap-3 px-6 border-b border-slate-100">
        <div
          class="h-9 w-9 rounded-xl bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center shadow-md shadow-orange-500/60">
          <i class="ri-slack-fill text-white text-[22px]"></i>
        </div>
        <div class="flex flex-col leading-tight">
          <span class="text-[10px] font-semibold text-slate-400 uppercase tracking-[0.18em]">Apollo</span>
          <span class="text-[15px] font-extrabold text-slate-900">Social</span>
        </div>
      </div>

      <nav class="aprio-sidebar-nav flex-1 px-4 pt-4 pb-2 overflow-y-auto no-scrollbar text-[13px]">
        <div class="px-1 mb-2 text-[10px] font-bold text-slate-400 uppercase tracking-wider">Navegação</div>
        <a href="#"><i class="ri-home-5-line text-lg"></i><span>Feed</span></a>
        <a href="#"><i class="ri-calendar-event-line text-lg"></i><span>Agenda</span></a>
        <a href="#" aria-current="page"><i class="ri-group-line text-lg"></i><span>Comunidades</span></a>
        <a href="#"><i class="ri-layout-5-line text-lg"></i><span>Núcleos</span></a>
        <a href="#"><i class="ri-ticket-line text-lg"></i><span>Classificados</span></a>
        <a href="#"><i class="ri-file-list-3-line text-lg"></i><span>Docs & Contratos</span></a>
        <a href="#"><i class="ri-user-3-line text-lg"></i><span>Perfil</span></a>
      </nav>

      <div class="border-t border-slate-100 px-4 py-3">
        <div class="flex items-center gap-3">
          <div class="h-8 w-8 rounded-full overflow-hidden bg-slate-100">
            <img src="{{user.avatar}}" class="h-full w-full object-cover" alt="{{user.name}}" />
          </div>
          <div class="flex flex-col leading-tight">
            <span class="text-[12px] font-semibold text-slate-900">{{user.name}}</span>
            <span class="text-[10px] text-slate-500">@{{user.handle}}</span>
          </div>
        </div>
      </div>
    </aside>

    <!-- MAIN -->
    <div class="flex-1 flex flex-col min-h-screen bg-slate-50/60">

      <!-- @section:header -->
      <header
        class="sticky top-0 z-40 h-14 flex items-center justify-between border-b border-slate-200 bg-white/90 backdrop-blur-md px-4 md:px-6">
        <div class="flex items-center gap-3">
          <div class="h-9 w-9 rounded-[6px] bg-slate-900 flex items-center justify-center md:hidden text-white">
            <i class="ri-group-line text-[20px]"></i>
          </div>
          <div class="flex flex-col leading-none">
            <h1 class="text-[15px] font-extrabold mt-2 text-slate-900">Comunidades cariocas</h1>
            <p class="text-[12px] text-slate-500">Grupos públicos para discutir, organizar e fortalecer o cultural
              carioca</p>
          </div>
        </div>

        <div class="hidden md:flex items-center gap-3 text-[12px]">
          <div class="relative group">
            <i
              class="ri-search-line text-slate-400 absolute left-3 top-1.5 text-xs group-focus-within:text-slate-600"></i>
            <input type="text" placeholder="Buscar comunidades..." id="search-communities"
              class="pl-8 pr-3 py-1.5 rounded-full border border-slate-200 bg-slate-50 text-[12px] w-64 focus:outline-none focus:ring-2 focus:ring-slate-900/10 focus:bg-white transition-all" />
          </div>
          <button id="dark-toggle" class="ml-1 text-slate-500 hover:text-slate-900" title="Dark Mode">
            <i class="ri-moon-line text-[14px]"></i>
          </button>
          <button class="ml-1 text-slate-500 hover:text-slate-900" title="Messages">
            <i class="ri-message-3-line text-[16px]"></i>
          </button>
          <button class="ml-1 text-slate-500 hover:text-slate-900" title="Notifications">
            <i class="ri-notification-2-line text-[16px]"></i>
          </button>
          <button
            class="ml-1 inline-flex h-8 w-8 items-center justify-center rounded-full hover:ring-2 hover:ring-slate-200 transition-all"
            title="Apps">
            <svg class="w-5 h-5 text-slate-500" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M6,8c1.1,0,2,-0.9,2,-2s-0.9,-2,-2,-2,-2,0.9,-2,2,0.9,2,2,2zM12,20c1.1,0,2,-0.9,2,-2s-0.9,-2,-2,-2,-2,0.9,-2,2,0.9,2,2,2zM6,20c1.1,0,2,-0.9,2,-2s-0.9,-2,-2,-2,-2,0.9,-2,2,0.9,2,2,2zM6,14c1.1,0,2,-0.9,2,-2s-0.9,-2,-2,-2,-2,0.9,-2,2,0.9,2,2,2zM12,14c1.1,0,2,-0.9,2,-2s-0.9,-2,-2,-2,-2,0.9,-2,2,0.9,2,2,2zM18,8c1.1,0,2,-0.9,2,-2s-0.9,-2,-2,-2,-2,0.9,-2,2,0.9,2,2,2zM12,8c1.1,0,2,-0.9,2,-2s-0.9,-2,-2,-2,-2,0.9,-2,2,0.9,2,2,2zM18,14c1.1,0,2,-0.9,2,-2s-0.9,-2,-2,-2,-2,0.9,-2,2,0.9,2,2,2zM18,20c1.1,0,2,-0.9,2,-2s-0.9,-2,-2,-2,-2,0.9,-2,2,0.9,2,2,2z">
              </path>
            </svg>
          </button>
          <button
            class="ml-1 inline-flex h-8 w-8 items-center justify-center rounded-full hover:ring-2 hover:ring-slate-200">
            <img src="{{user.avatar}}" alt="{{user.name}}" class="h-full w-full rounded-full object-cover" />
          </button>
        </div>

        <div class="flex md:hidden items-center gap-2">
          <button class="text-slate-500"><i class="ri-search-line text-xl"></i></button>
          <button id="dark-toggle-mobile" class="text-slate-500"><i class="ri-moon-line text-xl"></i></button>
        </div>
      </header>

      <!-- @section:content -->
      <main class="flex-1 px-0 md:px-6 py-4 md:py-6 pb-24 md:pb-8">
        <div class="w-full max-w-6xl mx-auto flex flex-col gap-4">

          <!-- @section:filters -->
          <section
            class="bg-white/90 border border-slate-200 md:rounded-2xl px-4 py-3 md:px-5 md:py-4 flex flex-col md:flex-row md:items-center md:justify-between gap-3">
            <div class="flex items-center gap-2">
              <span
                class="inline-flex h-7 w-7 items-center justify-center rounded-full bg-slate-900 text-white text-xs">
                <i class="ri-hashtag"></i>
              </span>
              <div class="flex flex-col leading-tight">
                <span class="text-[12px] font-semibold text-slate-900">Comunidades públicas</span>
                <span class="text-[11px] text-slate-500">Entre, leia as regras e conecte-se com quem vive a mesma cena
                  que você.</span>
              </div>
            </div>

            <div class="flex flex-wrap items-center gap-2 text-[11px]">
              <button class="px-3 py-1 rounded-full border border-slate-900 bg-slate-900 text-white font-medium"
                data-filter="all">Todas</button>
              <button class="px-3 py-1 rounded-full border border-slate-200 text-slate-700 hover:bg-slate-50"
                data-filter="after">After / madrugada</button>
              <button class="px-3 py-1 rounded-full border border-slate-200 text-slate-700 hover:bg-slate-50"
                data-filter="produtores">Produtores</button>
              <button class="px-3 py-1 rounded-full border border-slate-200 text-slate-700 hover:bg-slate-50"
                data-filter="zona-sul">Zona Sul</button>
            </div>
          </section>

          <!-- @section:grid -->
          <section class="mt-2">
            <div id="communities-grid" class="flex flex-wrap justify-start gap-4 md:gap-5" style="row-gap: 18px;">
              <!-- @loop: {{#each communities}} -->
              <article class="community-card" data-tags="{{community.tags}}">
                <figure class="community-card__media">
                  <img class="community-card__avatar" src="{{community.cover_image}}" alt="{{community.name}}"
                    loading="lazy" />
                </figure>
                <div class="community-card__body">
                  <div class="community-card__header">
                    <h2 class="community-card__name">{{community.name}}</h2>
                    {{#if community.verified}}
                    <svg fill="{{community.badge_color}}" class="community-card__badge"
                      xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                      <path
                        d="M23,12L20.56,9.22L20.9,5.54L17.29,4.72L15.4,1.54L12,3L8.6,1.54L6.71,4.72L3.1,5.53L3.44,9.21L1,12L3.44,14.78L3.1,18.47L6.71,19.29L8.6,22.47L12,21L15.4,22.46L17.29,19.28L20.9,18.46L20.56,14.78L23,12M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z" />
                    </svg>
                    {{/if}}
                  </div>
                  <p class="community-card__description">{{community.description}}</p>
                  <div class="community-card__footer">
                    <div class="community-card__stats">
                      <div class="community-card__stat">
                        <svg fill="#f9fafb" viewBox="0 0 24 24">
                          <path
                            d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,6A2,2 0 0,0 10,8A2,2 0 0,0 12,10A2,2 0 0,0 14,8A2,2 0 0,0 12,6M12,13C14.67,13 20,14.33 20,17V20H4V17C4,14.33 9.33,13 12,13Z" />
                        </svg>
                        <span class="community-card__stat-value">{{community.members_count}}</span>
                      </div>
                      <div class="community-card__stat">
                        <svg fill="#f9fafb" viewBox="0 0 24 24">
                          <path
                            d="M9,22V19H5A3,3 0 0,1 2,16V5A3,3 0 0,1 5,2H19A3,3 0 0,1 22,5V16A3,3 0 0,1 19,19H15V22L9,22M12,6A4,4 0 0,0 8,10A4,4 0 0,0 12,14A4,4 0 0,0 16,10A4,4 0 0,0 12,6Z" />
                        </svg>
                        <span>{{community.activity}}</span>
                      </div>
                    </div>
                    <div class="community-card__actions">
                      <button type="button" class="community-card__follow-btn">
                        <svg fill="#020617" viewBox="0 0 24 24">
                          <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />
                        </svg>
                        <span>Entrar</span>
                      </button>
                    </div>
                  </div>
                </div>
              </article>
              <!-- {{/each}} -->
            </div>
          </section>
        </div>
      </main>

      <!-- @section:bottom-nav -->
      <nav
        class="md:hidden fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-xl border-t border-slate-200/50 pb-safe z-50">
        <div class="max-w-2xl mx-auto w-full px-4 py-2 flex items-end justify-between h-[60px]">
          <div class="nav-btn w-14 pb-1"><i class="ri-home-5-line"></i><span>Feed</span></div>
          <div class="nav-btn w-14 pb-1"><i class="ri-calendar-line"></i><span>Agenda</span></div>
          <div class="relative -top-5">
            <button class="h-14 w-14 rounded-full bg-slate-900 text-white flex items-center justify-center shadow-lg">
              <i class="ri-add-line text-3xl"></i>
            </button>
          </div>
          <div class="nav-btn active w-14 pb-1"><i class="ri-group-line"></i><span>Comunidades</span></div>
          <div class="nav-btn w-14 pb-1"><i class="ri-user-3-line"></i><span>Perfil</span></div>
        </div>
      </nav>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const buttons = document.querySelectorAll('[data-filter]');
      const cards = document.querySelectorAll('.community-card');
      const search = document.getElementById('search-communities');

      buttons.forEach(btn => {
        btn.addEventListener('click', () => {
          const filter = btn.getAttribute('data-filter');
          buttons.forEach(b => {
            b.classList.remove('bg-slate-900', 'text-white', 'border-slate-900');
            b.classList.add('border-slate-200', 'text-slate-700');
          });
          btn.classList.add('bg-slate-900', 'text-white', 'border-slate-900');

          cards.forEach(card => {
            const tags = (card.getAttribute('data-tags') || '').toLowerCase();
            card.style.display = (filter === 'all' || tags.includes(filter)) ? '' : 'none';
          });
        });
      });

      if (search) {
        search.addEventListener('input', () => {
          const q = search.value.trim().toLowerCase();
          cards.forEach(card => {
            const name = (card.querySelector('.community-card__name')?.textContent || '').toLowerCase();
            const desc = (card.querySelector('.community-card__description')?.textContent || '').toLowerCase();
            card.style.display = (!q || name.includes(q) || desc.includes(q)) ? '' : 'none';
          });
        });
      }
    });
  </script>
</body>

</html>