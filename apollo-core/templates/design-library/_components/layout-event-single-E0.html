<!-- REQUIRES: https://assets.apollo.rio.br/uni.css + https://assets.apollo.rio.br/base.js -->
<!--
  Component: layout-event-single-E0
  Type: E0 (First design variant)
  Description: Full page layout for Event single page (event_listing CPT)
  Used in: single-event_listing.php template, popup/lightbox
  
  IMPORTANT: All elements MUST have data-tooltip for accessibility and UX
  NOTE: NO followers/friends count - Apollo is against ego/status culture
  Use inline-user-mention-U0 for organizer and interested people displays
  
  Placeholders:
  - {{event_id}} - Event post ID
  - {{event_title}} - Event title
  - {{event_date}} - Full event date
  - {{event_day}} - Day number
  - {{event_month}} - Month abbreviation
  - {{event_time}} - Event time
  - {{event_venue}} - Venue name
  - {{event_address}} - Full address
  - {{event_lat}} - Latitude (auto-geocoded from local CPT)
  - {{event_lng}} - Longitude (auto-geocoded from local CPT)
  - {{event_description}} - Full description
  - {{event_cover_image}} - Cover image URL
  - {{event_gallery}} - Array of gallery images
  - {{event_categories}} - Array of categories
  - {{event_djs}} - Array of DJ lineup (use inline-user-mention-U0)
  - {{event_ticket_url}} - Ticket purchase URL
  - {{event_ticket_price}} - Ticket price
  - {{event_interested_count}} - Number of interested (display only)
  - {{event_interested_avatars}} - Array of avatars (first 5 only)
  - {{event_organizer}} - Organizer data (use inline-user-mention-U0)
-->

<article class="mobile-container event-single-layout" data-component="layout-event-single" data-type="E0" data-event-id="{{event_id}}">
  
  <!-- Hero Media -->
  <header class="hero-media" data-tooltip="Imagem do evento">
    <img src="{{event_cover_image}}" alt="{{event_title}}" loading="eager">
    <div class="hero-overlay"></div>
    
    <!-- Back Button -->
    <button class="hero-back-btn" onclick="history.back()" aria-label="Voltar" data-tooltip="Voltar">
      <i class="ri-arrow-left-line"></i>
    </button>
    
    <!-- Favorite Button -->
    <button class="hero-fav-btn" id="btnFavorite" data-event-id="{{event_id}}" aria-label="Favoritar" data-tooltip="Adicionar aos favoritos">
      <i class="ri-heart-line"></i>
    </button>
    
    <!-- Hero Content -->
    <div class="hero-content">
      <!-- Category Tags -->
      <div class="event-tags" data-tooltip="Categorias">
        <template data-loop="{{event_categories}}">
          <span class="event-tag-pill">{{category_name}}</span>
        </template>
      </div>
      
      <h1 class="hero-title" data-tooltip="Título do evento">{{event_title}}</h1>
      
      <div class="hero-meta">
        <div class="hero-meta-item" data-tooltip="Data e hora">
          <i class="ri-calendar-line"></i>
          <span>{{event_date}} · {{event_time}}</span>
        </div>
        <div class="hero-meta-item" data-tooltip="Local">
          <i class="ri-map-pin-line"></i>
          <span>{{event_venue}}</span>
        </div>
      </div>
    </div>
  </header>
  
  <!-- Quick Actions -->
  <nav class="quick-actions" data-tooltip="Ações rápidas">
    <button class="quick-action" data-action="interested" id="btnInterested" data-tooltip="Marcar interesse">
      <span class="quick-action-icon">
        <i class="ri-star-line"></i>
      </span>
      <span class="quick-action-label">Interesse</span>
    </button>
    <button class="quick-action" data-action="going" id="btnGoing" data-tooltip="Confirmar presença">
      <span class="quick-action-icon">
        <i class="ri-check-line"></i>
      </span>
      <span class="quick-action-label">Vou</span>
    </button>
    <button class="quick-action" data-action="share" id="btnShare" data-tooltip="Compartilhar evento">
      <span class="quick-action-icon">
        <i class="ri-share-line"></i>
      </span>
      <span class="quick-action-label">Compartilhar</span>
    </button>
    <button class="quick-action" data-action="save" id="btnSave" data-tooltip="Salvar evento">
      <span class="quick-action-icon">
        <i class="ri-bookmark-line"></i>
      </span>
      <span class="quick-action-label">Salvar</span>
    </button>
  </nav>
  
  <!-- Interested People -->
  <div class="rsvp-row" data-tooltip="Pessoas interessadas">
    <div class="avatars-explosion">
      <template data-loop="{{event_interested_avatars}}" data-limit="5">
        <img src="{{avatar_url}}" alt="{{avatar_name}}" class="avatar" data-tooltip="{{avatar_name}}">
      </template>
      <template data-if="{{event_interested_count}} > 5">
        <span class="avatar avatar-count">+{{event_interested_remaining}}</span>
      </template>
    </div>
    <span class="interested-text">
      <strong>{{event_interested_count}}</strong> pessoas interessadas
    </span>
  </div>
  
  <!-- Main Content -->
  <main class="event-content">
    
    <!-- About Section -->
    <section class="section">
      <h2 class="section-title" data-tooltip="Sobre o evento">
        <i class="ri-information-line"></i>
        Sobre
      </h2>
      <div class="info-card" data-tooltip="Descrição">
        <p class="info-text">{{event_description}}</p>
      </div>
    </section>
    
    <!-- Music Genres Marquee -->
    <section class="section music-section">
      <h2 class="section-title" data-tooltip="Estilos musicais">
        <i class="ri-music-2-line"></i>
        Música
      </h2>
      <div class="music-tags-marquee">
        <div class="music-tags-track">
          <template data-loop="{{event_music_genres}}" data-repeat="2">
            <span class="music-tag">{{genre_name}}</span>
          </template>
        </div>
      </div>
    </section>
    
    <!-- DJ Lineup -->
    <section class="section lineup-section">
      <h2 class="section-title" data-tooltip="Line-up de DJs">
        <i class="ri-disc-line"></i>
        Line-up
      </h2>
      <div class="lineup-list">
        <template data-loop="{{event_djs}}">
          <a href="{{dj_permalink}}" class="lineup-card" data-tooltip="Ver perfil de {{dj_name}}">
            <div class="lineup-avatar">
              <template data-if="{{dj_image}}">
                <img src="{{dj_image}}" alt="{{dj_name}}" class="lineup-avatar-img">
              </template>
              <template data-else>
                <span class="lineup-avatar-fallback">{{dj_initials}}</span>
              </template>
            </div>
            <div class="lineup-info">
              <span class="lineup-name">{{dj_name}}</span>
              <span class="dj-link">
                <i class="ri-external-link-line"></i>
                Ver perfil
              </span>
            </div>
            <span class="lineup-time" data-tooltip="Horário">{{dj_time}}</span>
          </a>
        </template>
      </div>
    </section>
    
    <!-- Gallery Slider -->
    <section class="section gallery-section">
      <h2 class="section-title" data-tooltip="Galeria de fotos">
        <i class="ri-image-line"></i>
        Galeria
      </h2>
      <!-- Include block-slider-gallery-I0 here -->
      <div class="promo-gallery-slider" id="eventGallery">
        <div class="promo-track">
          <template data-loop="{{event_gallery}}">
            <div class="promo-slide">
              <img src="{{image_url}}" alt="{{image_alt}}" loading="lazy">
            </div>
          </template>
        </div>
        <button class="promo-prev" aria-label="Anterior"><i class="ri-arrow-left-s-line"></i></button>
        <button class="promo-next" aria-label="Próximo"><i class="ri-arrow-right-s-line"></i></button>
      </div>
    </section>
    
    <!-- Location Section -->
    <section class="section location-section">
      <h2 class="section-title" data-tooltip="Localização">
        <i class="ri-map-pin-line"></i>
        Local
      </h2>
      
      <div class="venue-card" data-tooltip="Informações do local">
        <div class="venue-info">
          <h3 class="venue-name">{{event_venue}}</h3>
          <p class="venue-address">{{event_address}}</p>
        </div>
        <a href="https://www.google.com/maps?q={{event_lat}},{{event_lng}}" target="_blank" rel="noopener" class="venue-directions" data-tooltip="Abrir no Google Maps">
          <i class="ri-direction-line"></i>
          Como chegar
        </a>
      </div>
      
      <!-- OSM Map -->
      <div class="local-images-slider" id="venueMap" data-lat="{{event_lat}}" data-lng="{{event_lng}}" data-tooltip="Mapa do local">
        <!-- Map will be rendered by JS -->
      </div>
      
      <div class="route-controls" data-tooltip="Calcular rota">
        <input type="text" class="route-input" id="routeOrigin" placeholder="Seu endereço de partida...">
        <button class="route-button" id="calcRoute" data-tooltip="Calcular rota">
          <i class="ri-route-line"></i>
          Traçar Rota
        </button>
      </div>
    </section>
    
    <!-- Ticket Section -->
    <section class="section ticket-section">
      <h2 class="section-title" data-tooltip="Ingressos">
        <i class="ri-ticket-line"></i>
        Ingressos
      </h2>
      
      <div class="ticket-card" data-tooltip="Informações do ingresso">
        <div class="ticket-icon">
          <i class="ri-ticket-2-line"></i>
        </div>
        <div class="ticket-info">
          <span class="ticket-name">Entrada</span>
          <span class="ticket-price">{{event_ticket_price}}</span>
        </div>
        <a href="{{event_ticket_url}}" target="_blank" rel="noopener" class="ticket-cta" data-tooltip="Comprar ingresso">
          Comprar
        </a>
      </div>
      
      <template data-if="{{event_coupon_code}}">
        <div class="apollo-coupon-detail" data-tooltip="Cupom de desconto">
          <span class="coupon-label">Cupom de desconto:</span>
          <code class="coupon-code" id="couponCode">{{event_coupon_code}}</code>
          <button class="copy-code-mini" onclick="navigator.clipboard.writeText('{{event_coupon_code}}')" data-tooltip="Copiar cupom">
            <i class="ri-file-copy-line"></i>
          </button>
        </div>
      </template>
    </section>
    
  </main>
  
  <!-- Bottom Action Bar -->
  <div class="bottom-bar">
    <a href="{{event_ticket_url}}" target="_blank" rel="noopener" class="bottom-btn btn-primary" data-tooltip="Comprar ingresso">
      <i class="ri-ticket-line"></i>
      Comprar Ingresso
    </a>
    <button class="bottom-btn btn-secondary" id="btnShareBottom" data-tooltip="Compartilhar">
      <i class="ri-share-forward-line"></i>
    </button>
  </div>
  
</article>

<style>
/* Event Single Layout - Type E0 */
.event-single-layout {
  min-height: 100vh;
  padding-bottom: 100px;
}

/* Hero Media */
.hero-media {
  position: relative;
  height: 50vh;
  min-height: 360px;
  overflow: hidden;
}

.hero-media img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.hero-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.3) 50%, transparent 100%);
}

.hero-back-btn,
.hero-fav-btn {
  position: absolute;
  top: 16px;
  width: 40px;
  height: 40px;
  background: rgba(0,0,0,0.4);
  backdrop-filter: blur(8px);
  border: none;
  border-radius: 50%;
  color: white;
  font-size: 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
  transition: all 0.2s ease;
}

.hero-back-btn:hover,
.hero-fav-btn:hover {
  background: rgba(0,0,0,0.6);
}

.hero-back-btn { left: 16px; }
.hero-fav-btn { right: 16px; }

.hero-fav-btn.active {
  color: #ef4444;
}

.hero-content {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 24px;
  color: white;
  z-index: 10;
}

.event-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 12px;
}

.event-tag-pill {
  padding: 4px 12px;
  background: rgba(249,115,22,0.9);
  border-radius: 999px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
}

.hero-title {
  font-size: 28px;
  font-weight: 800;
  margin-bottom: 12px;
  line-height: 1.2;
}

.hero-meta {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.hero-meta-item {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  opacity: 0.9;
}

.hero-meta-item i {
  font-size: 16px;
}

/* Quick Actions */
.quick-actions {
  display: flex;
  justify-content: space-around;
  padding: 16px;
  background: white;
  border-bottom: 1px solid #e5e7eb;
}

.quick-action {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  background: none;
  border: none;
  cursor: pointer;
  color: #64748b;
  transition: color 0.2s ease;
}

.quick-action:hover,
.quick-action.active {
  color: #f97316;
}

.quick-action-icon {
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f8fafc;
  border-radius: 50%;
  font-size: 20px;
  transition: all 0.2s ease;
}

.quick-action:hover .quick-action-icon,
.quick-action.active .quick-action-icon {
  background: #fff7ed;
}

.quick-action-label {
  font-size: 11px;
  font-weight: 500;
}

/* RSVP Row */
.rsvp-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  background: #f8fafc;
}

.avatars-explosion {
  display: flex;
}

.avatars-explosion .avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  border: 2px solid white;
  margin-left: -8px;
  object-fit: cover;
}

.avatars-explosion .avatar:first-child {
  margin-left: 0;
}

.avatar-count {
  display: flex;
  align-items: center;
  justify-content: center;
  background: #e5e7eb;
  font-size: 11px;
  font-weight: 600;
  color: #64748b;
}

.interested-text {
  font-size: 13px;
  color: #64748b;
}

.interested-text strong {
  color: #0f172a;
}

/* Content Sections */
.event-content {
  padding: 0 16px;
}

.section {
  padding: 24px 0;
  border-bottom: 1px solid #e5e7eb;
}

.section:last-child {
  border-bottom: none;
}

.section-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 16px;
  font-weight: 700;
  color: #0f172a;
  margin-bottom: 16px;
}

.section-title i {
  color: #f97316;
}

/* Info Card */
.info-card {
  background: #f8fafc;
  border-radius: 12px;
  padding: 16px;
}

.info-text {
  font-size: 14px;
  line-height: 1.7;
  color: #334155;
}

/* Music Marquee */
.music-tags-marquee {
  overflow: hidden;
  width: 100%;
}

.music-tags-track {
  display: flex;
  gap: 12px;
  animation: marquee 20s linear infinite;
}

.music-tag {
  padding: 8px 16px;
  background: #0f172a;
  color: white;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 500;
  white-space: nowrap;
}

@keyframes marquee {
  from { transform: translateX(0); }
  to { transform: translateX(-50%); }
}

/* Lineup */
.lineup-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.lineup-card {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: #f8fafc;
  border-radius: 12px;
  text-decoration: none;
  color: inherit;
  transition: background 0.2s ease;
}

.lineup-card:hover {
  background: #f1f5f9;
}

.lineup-avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  overflow: hidden;
  background: #e5e7eb;
}

.lineup-avatar-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.lineup-avatar-fallback {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  font-size: 16px;
  font-weight: 700;
  color: #64748b;
}

.lineup-info {
  flex: 1;
  min-width: 0;
}

.lineup-name {
  display: block;
  font-size: 14px;
  font-weight: 600;
  color: #0f172a;
}

.dj-link {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  color: #f97316;
}

.lineup-time {
  font-size: 12px;
  font-weight: 600;
  color: #64748b;
  background: white;
  padding: 4px 10px;
  border-radius: 6px;
}

/* Venue Card */
.venue-card {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  background: #f8fafc;
  border-radius: 12px;
  margin-bottom: 16px;
}

.venue-info {
  flex: 1;
  min-width: 0;
}

.venue-name {
  font-size: 14px;
  font-weight: 600;
  color: #0f172a;
  margin-bottom: 4px;
}

.venue-address {
  font-size: 12px;
  color: #64748b;
}

.venue-directions {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  background: #0f172a;
  color: white;
  border-radius: 8px;
  text-decoration: none;
  font-size: 12px;
  font-weight: 500;
  white-space: nowrap;
}

/* Map */
.local-images-slider {
  height: 200px;
  background: #e5e7eb;
  border-radius: 12px;
  margin-bottom: 12px;
  overflow: hidden;
}

/* Route Controls */
.route-controls {
  display: flex;
  gap: 8px;
}

.route-input {
  flex: 1;
  padding: 12px;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  font-size: 13px;
}

.route-button {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 12px 16px;
  background: #f97316;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  white-space: nowrap;
}

/* Ticket Card */
.ticket-card {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  background: linear-gradient(135deg, #f8fafc, #f1f5f9);
  border: 1px solid #e5e7eb;
  border-radius: 12px;
}

.ticket-icon {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f97316;
  color: white;
  border-radius: 10px;
  font-size: 24px;
}

.ticket-info {
  flex: 1;
}

.ticket-name {
  display: block;
  font-size: 14px;
  font-weight: 600;
  color: #0f172a;
}

.ticket-price {
  font-size: 12px;
  color: #64748b;
}

.ticket-cta {
  padding: 10px 20px;
  background: #0f172a;
  color: white;
  border-radius: 8px;
  text-decoration: none;
  font-size: 13px;
  font-weight: 600;
}

/* Coupon */
.apollo-coupon-detail {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 12px;
  padding: 12px;
  background: #fef9c3;
  border-radius: 8px;
}

.coupon-label {
  font-size: 12px;
  color: #92400e;
}

.coupon-code {
  padding: 4px 8px;
  background: white;
  border-radius: 4px;
  font-size: 13px;
  font-weight: 600;
  color: #92400e;
}

.copy-code-mini {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: white;
  border: none;
  border-radius: 4px;
  color: #92400e;
  cursor: pointer;
}

/* Bottom Bar */
.bottom-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  gap: 12px;
  padding: 16px;
  background: white;
  border-top: 1px solid #e5e7eb;
  z-index: 100;
}

.bottom-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  height: 48px;
  border: none;
  border-radius: 12px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  text-decoration: none;
  transition: all 0.2s ease;
}

.btn-primary {
  flex: 1;
  background: #f97316;
  color: white;
}

.btn-primary:hover {
  background: #ea580c;
}

.btn-secondary {
  width: 48px;
  background: #f1f5f9;
  color: #64748b;
}

.btn-secondary:hover {
  background: #e5e7eb;
}

/* Responsive */
@media (min-width: 768px) {
  .hero-media {
    height: 60vh;
  }
  
  .hero-title {
    font-size: 36px;
  }
  
  .hero-meta {
    flex-direction: row;
    gap: 24px;
  }
}
</style>

