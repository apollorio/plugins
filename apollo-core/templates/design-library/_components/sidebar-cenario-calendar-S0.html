<!-- REQUIRES: https://assets.apollo.rio.br/uni.css + https://assets.apollo.rio.br/base.js -->
<!--
  Component: sidebar-cenario-calendar-S0
  Type: S0 (First design variant)
  Description: Calendar summary sidebar for Cena Rio (events by status)
  Used in: Cena Rio calendar page, Fornecedores page
  Access: Only for 'author' or 'cena-rio' user roles, admin allowed
  
  IMPORTANT: All elements MUST have data-tooltip for accessibility and UX
  NOTE: NO followers/friends count displayed - Apollo is against ego/status culture
  
  Placeholders:
  - {{current_month}} - Current month name
  - {{confirmed_events}} - Array of confirmed events
  - {{predicted_events}} - Array of predicted events
  - {{confirmed_count}} - Number of confirmed
  - {{predicted_count}} - Number of predicted
-->

<aside class="hidden lg:block w-80 shrink-0 space-y-4" data-component="sidebar-cenario-calendar" data-type="S0">
  
  <!-- Month Header -->
  <div class="bg-white rounded-2xl border border-slate-200 p-4">
    <div class="flex items-center justify-between mb-3">
      <h3 class="text-sm font-bold text-slate-900 uppercase tracking-wider" data-tooltip="Resumo do mês">
        {{current_month}}
      </h3>
      <div class="flex items-center gap-2">
        <span class="text-[11px] text-emerald-600 font-semibold" data-tooltip="Eventos confirmados">
          {{confirmed_count}} ✓
        </span>
        <span class="text-[11px] text-blue-600 font-semibold" data-tooltip="Eventos previstos">
          {{predicted_count}} ?
        </span>
      </div>
    </div>
    
    <!-- Mini Calendar Grid -->
    <div class="mini-calendar-grid" data-tooltip="Calendário resumido">
      <!-- Week days header -->
      <div class="mini-cal-header">
        <span>D</span><span>S</span><span>T</span><span>Q</span><span>Q</span><span>S</span><span>S</span>
      </div>
      <!-- Days will be rendered dynamically -->
      <div class="mini-cal-days" id="miniCalDays"></div>
    </div>
  </div>
  
  <!-- Confirmed Events Section -->
  <div class="bg-white rounded-2xl border border-slate-200 p-4">
    <div class="flex items-center justify-between mb-3">
      <h3 class="text-[12px] font-bold text-slate-900 uppercase tracking-wider" data-tooltip="Eventos confirmados">
        <span class="inline-flex h-2 w-2 rounded-full bg-emerald-500 mr-2"></span>
        Confirmados
      </h3>
      <span class="text-[11px] text-slate-400">{{confirmed_count}} eventos</span>
    </div>
    
    <div class="space-y-2 max-h-[200px] overflow-y-auto custom-scrollbar">
      <template data-loop="{{confirmed_events}}">
        <a href="{{event_permalink}}" class="event-summary-item event-summary-item--confirmed" data-tooltip="{{event_title}}">
          <div class="event-summary-date">
            <span class="day">{{event_day}}</span>
            <span class="month">{{event_month}}</span>
          </div>
          <div class="event-summary-info">
            <span class="event-summary-title">{{event_title}}</span>
            <span class="event-summary-venue">{{event_venue}}</span>
          </div>
        </a>
      </template>
      
      <template data-if="{{confirmed_count}} == 0">
        <p class="text-[11px] text-slate-400 text-center py-4">Nenhum evento confirmado este mês</p>
      </template>
    </div>
  </div>
  
  <!-- Predicted Events Section -->
  <div class="bg-white rounded-2xl border border-slate-200 p-4">
    <div class="flex items-center justify-between mb-3">
      <h3 class="text-[12px] font-bold text-slate-900 uppercase tracking-wider" data-tooltip="Eventos previstos">
        <span class="inline-flex h-2 w-2 rounded-full bg-blue-500 mr-2"></span>
        Previstos
      </h3>
      <span class="text-[11px] text-slate-400">{{predicted_count}} eventos</span>
    </div>
    
    <div class="space-y-2 max-h-[200px] overflow-y-auto custom-scrollbar">
      <template data-loop="{{predicted_events}}">
        <a href="{{event_permalink}}" class="event-summary-item event-summary-item--predicted" data-tooltip="{{event_title}}">
          <div class="event-summary-date">
            <span class="day">{{event_day}}</span>
            <span class="month">{{event_month}}</span>
          </div>
          <div class="event-summary-info">
            <span class="event-summary-title">{{event_title}}</span>
            <span class="event-summary-venue">{{event_venue}}</span>
          </div>
        </a>
      </template>
      
      <template data-if="{{predicted_count}} == 0">
        <p class="text-[11px] text-slate-400 text-center py-4">Nenhum evento previsto este mês</p>
      </template>
    </div>
  </div>
  
  <!-- Quick Stats -->
  <div class="bg-slate-900 rounded-2xl p-4 text-white">
    <h3 class="text-[12px] font-bold uppercase tracking-wider mb-3 opacity-70" data-tooltip="Estatísticas rápidas">
      Resumo
    </h3>
    <div class="grid grid-cols-2 gap-3">
      <div class="stat-box" data-tooltip="Total de eventos">
        <span class="stat-value">{{total_events}}</span>
        <span class="stat-label">Eventos</span>
      </div>
      <div class="stat-box" data-tooltip="Total de locais">
        <span class="stat-value">{{total_venues}}</span>
        <span class="stat-label">Locais</span>
      </div>
      <div class="stat-box" data-tooltip="Total de DJs">
        <span class="stat-value">{{total_djs}}</span>
        <span class="stat-label">DJs</span>
      </div>
      <div class="stat-box" data-tooltip="Comunidades ativas">
        <span class="stat-value">{{total_communities}}</span>
        <span class="stat-label">Comunidades</span>
      </div>
    </div>
  </div>
  
</aside>

<style>
/* Mini Calendar */
.mini-calendar-grid {
  font-size: 11px;
}

.mini-cal-header {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  text-align: center;
  color: #64748b;
  font-weight: 600;
  margin-bottom: 4px;
}

.mini-cal-header span {
  padding: 4px 0;
}

.mini-cal-days {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
}

.mini-cal-day {
  aspect-ratio: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
  font-size: 10px;
  color: #64748b;
}

.mini-cal-day.has-event-confirmed {
  background: #dcfce7;
  color: #166534;
  font-weight: 600;
}

.mini-cal-day.has-event-predicted {
  background: #dbeafe;
  color: #1e40af;
  font-weight: 600;
}

.mini-cal-day.today {
  background: #0f172a;
  color: white;
  font-weight: 700;
}

/* Event Summary Items */
.event-summary-item {
  display: flex;
  gap: 12px;
  padding: 8px;
  border-radius: 8px;
  text-decoration: none;
  transition: background 0.2s ease;
}

.event-summary-item:hover {
  background: #f8fafc;
}

.event-summary-item--confirmed {
  border-left: 3px solid #22c55e;
}

.event-summary-item--predicted {
  border-left: 3px solid #3b82f6;
}

.event-summary-date {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  background: #f1f5f9;
  border-radius: 6px;
}

.event-summary-date .day {
  font-size: 14px;
  font-weight: 700;
  color: #0f172a;
  line-height: 1;
}

.event-summary-date .month {
  font-size: 8px;
  font-weight: 600;
  color: #64748b;
  text-transform: uppercase;
}

.event-summary-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.event-summary-title {
  font-size: 12px;
  font-weight: 600;
  color: #0f172a;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.event-summary-venue {
  font-size: 10px;
  color: #64748b;
}

/* Stats Box */
.stat-box {
  background: rgba(255,255,255,0.1);
  border-radius: 8px;
  padding: 10px;
  text-align: center;
}

.stat-value {
  display: block;
  font-size: 20px;
  font-weight: 700;
}

.stat-label {
  font-size: 10px;
  opacity: 0.7;
}

/* Custom Scrollbar */
.custom-scrollbar::-webkit-scrollbar {
  width: 4px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 2px;
}
</style>

