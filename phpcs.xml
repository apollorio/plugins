<?xml version="1.0"?>
<ruleset name="Apollo Plugins - Complete Standards">
	<description>WordPress + Extra + VIP-Go + PHPCompatibility for Apollo Ecosystem</description>

	<!-- ============================================ -->
	<!-- FILE PATHS                                   -->
	<!-- ============================================ -->
	<file>./apollo-core</file>
	<file>./apollo-events-manager</file>
	<file>./apollo-social</file>

	<!-- Exclude third-party and build files -->
	<exclude-pattern>*/vendor/*</exclude-pattern>
	<exclude-pattern>*/dev-vendor/*</exclude-pattern>
	<exclude-pattern>*/node_modules/*</exclude-pattern>
	<exclude-pattern>*/tests/*</exclude-pattern>
	<exclude-pattern>*/docs/*</exclude-pattern>
	<exclude-pattern>*/assets/*</exclude-pattern>
	<exclude-pattern>*.min.js</exclude-pattern>
	<exclude-pattern>*.min.css</exclude-pattern>

	<!-- ============================================ -->
	<!-- PHPCS CONFIGURATION                          -->
	<!-- ============================================ -->
	<arg value="ps"/>
	<arg name="colors"/>
	<arg name="extensions" value="php"/>
	<arg name="parallel" value="12"/>
	<arg name="basepath" value="."/>

	<!-- ============================================ -->
	<!-- STANDARDS: WordPress → Extra → PHPCompatibility -->
	<!-- ============================================ -->
	<rule ref="WordPress"/>
	<rule ref="WordPress-Extra"/>

	<!-- PHP Compatibility Check -->
	<config name="testVersion" value="8.1-"/>
	<rule ref="PHPCompatibilityWP">
		<include-pattern>*.php</include-pattern>
	</rule>

	<!-- ============================================ -->
	<!-- GLOBAL PREFIXES                              -->
	<!-- ============================================ -->
	<rule ref="WordPress.NamingConventions.PrefixAllGlobals">
		<properties>
			<property name="prefixes" type="array">
				<element value="apollo"/>
				<element value="APOLLO"/>
			</property>
		</properties>
	</rule>

	<!-- ============================================ -->
	<!-- INTERNATIONALIZATION (i18n)                  -->
	<!-- ============================================ -->
	<rule ref="WordPress.WP.I18n">
		<properties>
			<property name="text_domain" type="array">
				<element value="apollo-core"/>
				<element value="apollo-events-manager"/>
				<element value="apollo-social"/>
				<element value="apollo-hardening"/>
				<element value="apollo-secure-upload"/>
				<element value="apollo-webp-compressor"/>
			</property>
		</properties>
	</rule>

	<!-- ============================================ -->
	<!-- CUSTOM CAPABILITIES                          -->
	<!-- ============================================ -->
	<rule ref="WordPress.WP.Capabilities">
		<properties>
			<property name="custom_capabilities" type="array">
				<element value="manage_apollo"/>
				<element value="manage_apollo_security"/>
				<element value="manage_apollo_uploads"/>
				<element value="manage_apollo_compression"/>
				<element value="manage_apollo_audit"/>
				<element value="view_apollo_reports"/>
				<element value="edit_apollo_settings"/>
				<element value="apollo_upload_media"/>
			</property>
		</properties>
	</rule>

	<!-- ============================================ -->
	<!-- TIMEZONE CONFIGURATION                       -->
	<!-- ============================================ -->
	<!-- DateTime restricted functions check (no custom timezone property) -->
	<rule ref="WordPress.DateTime.RestrictedFunctions"/>

	<!-- ============================================ -->
	<!-- MODERN PHP: Allow Short Array Syntax         -->
	<!-- ============================================ -->
	<rule ref="Generic.Arrays.DisallowShortArraySyntax">
		<exclude name="Generic.Arrays.DisallowShortArraySyntax"/>
	</rule>
	<rule ref="Universal.Arrays.DisallowShortArraySyntax">
		<exclude name="Universal.Arrays.DisallowShortArraySyntax"/>
	</rule>

	<!-- ============================================ -->
	<!-- YODA CONDITIONS: ENFORCE                     -->
	<!-- ============================================ -->
	<rule ref="WordPress.PHP.YodaConditions"/>

	<!-- ============================================ -->
	<!-- RELAXED RULES (Pragmatic Approach)           -->
	<!-- ============================================ -->

	<!-- File naming: Allow modern naming conventions -->
	<rule ref="WordPress.Files.FileName">
		<properties>
			<property name="strict_class_file_names" value="false"/>
		</properties>
		<exclude name="WordPress.Files.FileName.NotHyphenatedLowercase"/>
		<exclude name="WordPress.Files.FileName.InvalidClassFileName"/>
	</rule>

	<!-- Variable naming: Allow camelCase -->
	<rule ref="WordPress.NamingConventions.ValidVariableName">
		<exclude name="WordPress.NamingConventions.ValidVariableName.VariableNotSnakeCase"/>
		<exclude name="WordPress.NamingConventions.ValidVariableName.UsedPropertyNotSnakeCase"/>
	</rule>

	<!-- Function naming: Allow camelCase methods -->
	<rule ref="WordPress.NamingConventions.ValidFunctionName">
		<exclude name="WordPress.NamingConventions.ValidFunctionName.MethodNameInvalid"/>
	</rule>

	<!-- Hook naming: Allow modern hook names -->
	<rule ref="WordPress.NamingConventions.ValidHookName">
		<properties>
			<property name="additionalWordDelimiters" value="-/."/>
		</properties>
	</rule>

	<!-- Array alignment: Pragmatic settings -->
	<rule ref="WordPress.Arrays.MultipleStatementAlignment">
		<properties>
			<property name="maxColumn" value="120"/>
			<property name="ignoreNewlines" value="true"/>
		</properties>
	</rule>

	<!-- Documentation: Don't block deployment -->
	<rule ref="Squiz.Commenting.FileComment">
		<exclude name="Squiz.Commenting.FileComment.Missing"/>
	</rule>
	<rule ref="Squiz.Commenting.ClassComment">
		<exclude name="Squiz.Commenting.ClassComment.Missing"/>
	</rule>
	<rule ref="Squiz.Commenting.FunctionComment">
		<exclude name="Squiz.Commenting.FunctionComment.Missing"/>
		<exclude name="Squiz.Commenting.FunctionComment.MissingParamTag"/>
	</rule>
	<rule ref="Squiz.Commenting.InlineComment">
		<exclude name="Squiz.Commenting.InlineComment.InvalidEndChar"/>
	</rule>
	<rule ref="Squiz.Commenting.VariableComment">
		<exclude name="Squiz.Commenting.VariableComment.Missing"/>
	</rule>

	<!-- Allow short ternary operators in modern PHP -->
	<rule ref="Universal.Operators.DisallowShortTernary">
		<exclude name="Universal.Operators.DisallowShortTernary.Found"/>
	</rule>

	<!-- Allow file operations -->
	<rule ref="WordPress.WP.AlternativeFunctions">
		<exclude name="WordPress.WP.AlternativeFunctions.file_get_contents_file_get_contents"/>
		<exclude name="WordPress.WP.AlternativeFunctions.file_system_read_file_get_contents"/>
	</rule>

	<!-- Performance: Allow reasonable slow queries in admin -->
	<rule ref="WordPress.DB.SlowDBQuery">
		<exclude name="WordPress.DB.SlowDBQuery.slow_db_query_meta_key"/>
		<exclude name="WordPress.DB.SlowDBQuery.slow_db_query_tax_query"/>
	</rule>

	<!-- Database: Allow custom cache functions and table interpolation -->
	<rule ref="WordPress.DB.DirectDatabaseQuery">
		<properties>
			<property name="customCacheGetFunctions" type="array">
				<element value="wp_cache_get"/>
				<element value="apollo_cache_get"/>
			</property>
		</properties>
	</rule>
	<!-- Allow table name interpolation with $wpdb->prefix (common safe pattern) -->
	<rule ref="WordPress.DB.PreparedSQL">
		<exclude name="WordPress.DB.PreparedSQL.InterpolatedNotPrepared"/>
	</rule>

	<!-- Posts per page: Reasonable limit -->
	<rule ref="WordPress.WP.PostsPerPage">
		<properties>
			<property name="posts_per_page" value="100"/>
		</properties>
	</rule>

	<!-- Security: Keep strict rules -->
	<rule ref="WordPress.Security"/>




</ruleset>
