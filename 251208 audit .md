Apollo‚ÄëRio is a free, ego/money‚Äëfree social platform for Rio‚Äôs music and event community. The project currently lives inside wp-content/plugins as four plugins ‚Äî apollo‚Äëcore, apollo‚Äësocial, apollo‚Äëevents‚Äëmanager, and apollo‚Äërio (PWA). Each plugin registers its own admin menus, settings pages and shortcodes. For instance, Apollo Core exposes a hub page with tabs for shortcodes, placeholders, forms, roles, meta keys and settings
github.com
github.com
. Apollo Social, Events Manager and others add their own menu entries and mod pages, leading to a scattered admin experience. The goal of this investigation is to consolidate all control panels into a single, secure ‚ÄúCommand Cabin‚Äù for administrators. This cabin will unify moderation, memberships, groups, events, documents, design library and settings under one roof, with toggles to enable/disable modules, and a clean sidebar structure. No statistics will be shown inside moderation pages, but they can be accessed separately.

üß™ Assessment Overview

Existing Admin Hub: Apollo Core already exposes a hub page (apollo-core-hub) with multiple tabs and a settings page that stores options like _apollo_core_moderation_enabled, _apollo_core_cenario_enabled, etc. Those checkboxes allow modules to be enabled or disabled
github.com
. We can reuse this pattern.

Menu Sprawl: Each plugin adds its own top‚Äëlevel and submenu items. There are separate pages for moderation, CENA‚ÄëRIO, forms, builder, notifications and analytics. The result is a cluttered wp‚Äëadmin sidebar.

Moderation & Roles: Moderation queue pages exist under apollo-core/admin/moderation-page.php. Custom roles and capabilities are defined (e.g. apollo, cena_role, cena_moderator) with a matrix of capabilities
github.com
. This matrix should remain accessible, but within the unified panel.

Outdated or TODO features: Some pages (duplicate event action, DJ/local forms) contain TODO notes or unimplemented pieces. Those will need attention during the consolidation.

Quality Assurance: Code must pass PHPCS with zero errors, and we need a final audit check before deployment.

üõ†Ô∏è High‚ÄëLevel Tasks

The plan below is intended to be used as a single prompt for an AI code assistant (e.g. Copilot / Codex MAX). It breaks down the work into phases so the assistant can modify and add code across all four plugins without ambiguity. Each phase contains up to five sub‚Äëtasks to avoid overwhelming the model, and uses clear, imperative language. The tasks ask the assistant to locate existing code, refactor it, and add new functionality while maintaining WordPress coding standards.

Phase 1 ‚Äì Discovery & Mapping

Scan existing menus: search the repo for add_menu_page and add_submenu_page (already identified in apollo-core/admin/admin-apollo-core-hub.php
github.com
 and similar files). Build a map of all current top‚Äëlevel and sub‚Äëmenu slugs, the callback functions, and their capabilities.

Catalogue module toggles: inspect the settings page in Apollo Core that currently stores module toggles (moderation, CENA‚ÄëRIO, forms, quiz, rate limiting, audit log)
github.com
. Note which options are stored in wp_options and how they are named.

Identify role & capability definitions: examine the functions that create custom roles and capabilities (e.g. apollo_core_get_all_roles() and their use in roles tab
github.com
). Document the capability names and which roles have them.

Locate moderation, membership and group management code: find files like apollo-core/admin/moderation-page.php, apollo-social/.../memberships, apollo-social/.../groups. Note what each page does and any TODO comments for unimplemented features.

Record outdated/TODO items: list pages or actions with TODO markers (e.g. duplicate event, DJ/local submission). Include file names and line numbers.

Phase 2 ‚Äì Design the Unified Cabin

Create a top‚Äëlevel ‚ÄúApollo Control‚Äù menu: use add_menu_page() to add a new top‚Äëlevel entry labelled ‚ÄúApollo Control‚Äù, accessible only to administrators (manage_options). Use a unique slug, e.g. apollo-control.

Define sub‚Äëpages as tabs within the cabin: implement a callback that renders the cabin page with tabs similar to the existing hub. Proposed tabs:

Modules: toggles to enable/disable moderation, CENA‚ÄëRIO, forms, quiz, rate limiting and audit log (migrated from Apollo Core settings
github.com
).

Moderation: embed the moderation queue UI here. Remove the separate apollo-moderation menu.

Memberships: show existing membership types, allow admins to add/remove types and assign users. Use the existing REST endpoints from apollo/v1/membros but create a nice UI.

Groups/Comunas: list communities and n√∫cleos. Provide controls to approve/reject, edit descriptions, and manage members.

Events: list submitted events (both social and CENA‚ÄëRIO). Provide buttons to duplicate, confirm or reject, with filtering options.

Documents: list documents and signatures, using the code behind [apollo_documents] and [apollo_sign_document].

Design Library: reuse the existing design library page listing approved templates.

Add a settings section: include toggles for chat, notifications, and other subsystems. Use get_option/update_option for persistence.

Consolidate role/capability matrix: replicate the ‚ÄúMatriz de Permiss√µes‚Äù table inside the Roles tab
github.com
. Provide a link to User Role Editor rather than letting admins edit capabilities directly.

Ensure no statistics appear on moderation pages: keep analytics (event views, user stats) on a separate admin page (e.g. ‚ÄúApollo Analytics‚Äù).

Phase 3 ‚Äì Refactor & Migrate Features

Replace scattered pages with the cabin: modify each plugin so that existing top‚Äëlevel menus (e.g. apollo-core-hub, apollo-moderation, apollo-events-manager pages) redirect to the new cabin or are removed if redundant. Leave only the new unified top‚Äëlevel entry.

Move module toggles: remove the old settings page in Apollo Core and instead add the checkboxes to the Modules tab. Ensure the options names remain the same for backward compatibility.

Integrate moderation: find the existing moderation queue rendering functions and include them within the Moderation tab. Maintain capability checks (e.g. only moderators can see the queue).

Integrate memberships and groups: reuse or wrap the REST endpoints /apollo/v1/membros and /apollo/v1/comunas to fetch and update data. Build forms and tables using WordPress List Tables or plain HTML.

Update CSS/JS: unify admin styles by enqueuing a single CSS file for the cabin (e.g. apollo-control.css). Remove redundant admin CSS enqueues. Ensure all tabs use the same design language.

Phase 4 ‚Äì Quality & Compliance

PHPCS & PHPCBF: run phpcs using WordPress and WordPress‚ÄëVIP‚ÄëGo standards across all modified files. Use phpcbf to automatically fix formatting issues. Ensure zero remaining errors.

Fix nonces & permissions: verify that every form and action in the new cabin uses wp_nonce_field/check_admin_referer and checks current_user_can( 'manage_options' ) or the appropriate capability.

Remove deprecated code: delete or deprecate files that are no longer used (e.g. admin-apollo-core-hub.php after migration). Add a __deprecated_function() call if needed for backward compatibility.

Update outdated text: review all static content in the admin pages (help sections, instructions) and refresh any outdated references (e.g. old event submission guidelines, old date examples).

Perform final audit: write an audit script (or manual check list) to verify that the control cabin works end‚Äëto‚Äëend: enabling/disabling modules persists correctly, moderation queue is accessible, memberships and groups are manageable, and no old menus appear. Only after passing all checks can the plugin be considered deploy‚Äëready.

Phase 5 ‚Äì Preparation for Release

Create a changelog and upgrade notice: document the migration in readme.txt (e.g. ‚Äúv2.0.0 ‚Äì Consolidated admin control cabin; removed scattered menus; updated settings and roles.‚Äù). Mention that administrators will now find all settings under the new menu.

Test on a LocalWP site: spin up a test site with sample data (events, groups, documents). Verify that the control cabin works with different user roles (Administrator, Apollo Moderator, CENA‚ÄëRIO user, subscriber). Ensure the PWA (Apollo Rio) still reads settings correctly.

Prepare deployment instructions: note any required database updates (if membership tables change). Provide instructions for clearing caches and migrating options.

Schedule a soft launch: consider a staging environment for internal testing by moderators and administrators before going live.

Post‚Äëlaunch monitoring: plan to monitor error logs and user feedback after deployment to catch any regressions.

‚ö†Ô∏è Notes & Considerations

Security: only administrators should access the cabin. Custom capabilities (Apollo moderator, CENA‚ÄëRIO moderator) should still be respected for certain tabs (e.g. moderation tab visible only to view_moderation_queue).

Extensibility: other modules may be added later (e.g. notifications, chat, analytics). Leave room in the UI for new tabs or toggles.

Non‚Äëintrusive: existing front‚Äëend shortcodes and public pages must remain unaffected. This refactor is purely for admin UX.

Localization: preserve existing i18n text domains (apollo-core, apollo-social, etc.) and use __()/_e() for any new strings.

‚úÖ Next Steps

Run each phase sequentially using Copilot/Codex. After Phase 4 completes with zero PHPCS errors and a passing audit, the code should be ready for deployment. If any critical issue is found during the audit, fix it before proceeding to Phase 5. When the cabin is live, moderators and administrators will finally have a single, powerful dashboard to fly Apollo comfortably.

# HANDOVER AREA - COPILOT VSCODE CODEX-MAX-5.1 to SELF
Below space for records WITH TIMESTAMP of evaluation progress and all usefull info that we must know.

TIME STAMP | TOPIC/PLUGIN | REMARK      | SOLVED or INSTALLED with success? |  Rest |
